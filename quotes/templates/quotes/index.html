{% extends "quotes/base.html" %}
{% load static %}

{% block title %}–°–ª—É—á–∞–π–Ω–∞—è —Ü–∏—Ç–∞—Ç–∞{% endblock %}

{% block content %}
{% if quote %}
    <div class="quote-card">
        <p class="quote-text">"{{ quote.text }}"</p>
        <p class="quote-source">‚Äî {{ quote.source.name }}</p>
        <p class="quote-stats">üëÅ {{ quote.view_count }} –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤</p>

        <div class="quote-actions" style="display: flex; flex-direction: row; justify-content: center; gap: 15px; margin-top: 20px;">
            <form method="post" action="{% url 'quotes:like_quote' quote.id %}">
                {% csrf_token %}
                <button type="submit">üëç {{ quote.likes }}</button>
            </form>

            <form method="post" action="{% url 'quotes:dislike_quote' quote.id %}">
                {% csrf_token %}
                <button type="submit">üëé {{ quote.dislikes }}</button>
            </form>
        </div>
    </div>
{% else %}
    <p>{{ error }}</p>
    <a href="{% url 'quotes:add_quote' %}">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ü–∏—Ç–∞—Ç—É</a>
{% endif %}

<div class="character-container" style="text-align:center; margin-top:30px;">
    <img id="character" src="{% static 'quotes/img/read1.png' %}" alt="Character" style="max-width:200px;">
</div>


<script>
    document.addEventListener("DOMContentLoaded", function() {
        const images = [
            "{% static 'quotes/img/read1.png' %}",
            "{% static 'quotes/img/read2.png' %}",
            "{% static 'quotes/img/cinema.png' %}",
            "{% static 'quotes/img/write.png' %}"
        ];

        let index = 0;
        const character = document.getElementById("character");

        setInterval(() => {
            index = (index + 1) % images.length;
            character.src = images[index];
        }, 2500); // –∫–∞–∂–¥—ã–µ 2.5 —Å–µ–∫—É–Ω–¥—ã
    });
</script>
{% endblock %}
